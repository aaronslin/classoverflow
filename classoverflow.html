<!-- classoverflow.html -->
<head>
  <title>Dear Beta</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>

<body>
  {{> loginModal}}
  <div id="myContainer">
    <div id="header_container">
    	<header>
    	  <h1>Dear Beta: An Advice Column for 6.004</h1>
        <form class="new-error-entry new-entry">
        <table>
          {{> column_width}}
          <tr id="inputErrorCoords">
            <td></td>
            <td>
            <select required name="errorCoord0">
              <option value="lab3/FA">lab3/FA</option>
              <option value="lab3/alu">lab3/alu</option>
              <option value="lab3/arith">lab3/arith</option>
              <option value="lab3/bool">lab3/bool</option>
              <option value="lab3/cmp">lab3/cmp</option>
              <option value="lab3/shift">lab3/shift</option>
            </select>
            </td>
            <!--td><input type="text" placeholder="CheckoffFile" name="errorCoord0" /></td-->
            <td><input type="text" placeholder="Test Number" name="errorCoord1"/></td>
            <td><input type="text" placeholder="Time (ns)" name="errorCoord2" /></td>

            <td>
              <button id="findorrequestbtn" class="btn btn-danger">
                Find or Register Error
              </button>
            </td>
            <td id="loginInfo_td">
              <div id="loginInfo">
                
              </div>
            </td>
          </tr>
        </table>
        </form>
    	</header>
      <div id="errorMessage">
      </div>
    </div>
    <div id="errorHintTable_container">
    	<table id="errorHintTable">
        {{> column_width}}
        <thead>
    			<th>Requests</th>
    			<th class="error_th">Module</th>
          <th class="error_th">Test Number</th>
          <th class="error_th">Time (ns)</th>
    			<th>Hint</th>
          <th></th>
    		</thead>
        {{#each errors}}
          {{> error_entry}}
        {{/each}}
    	</table>
      {{> feedbackBox}}
    </div>
    <footer>
      <!-- Nothing -->
    </footer>
  </div>
</body>

<template name="error_entry">
  <tr id="errorID-{{_id}}" class="firstErrorRow">
  	<td class="requests_td">
      <span class="request_btn">
        <button type="button" class="btn btn-default addRequest {{#if ifRequested}}requested{{else}}notrequested{{/if}}">
          {{#if ifRequested}}Watch{{else}}Watch{{/if}}
        </button>
      </span>
      <span class="request_count">
        {{numRequests}}
      </span>
    </td>
   	<td class="errorID_td left-align">
	    <span class="text">{{errorCoord0}}</span>
    </td>
    <td class="errorID_td right-align">
      <span class="text">{{errorCoord1}}</span>
    </td>
    <td class="errorID_td right-align">
      <span class="text">{{errorCoord2}}</span>
    </td>
  	<td class="hints_td">
  		<ul>
    		<li>
          <form class="new-hint-entry new-entry">
	  	      <textarea class="hintTextarea" rows="1" placeholder="Add a hint!" style="height: 34px"></textarea>
	  	 	  </form>
       </li>
  			{{#each hintIDs}}
  				{{#each sortedHints}}
  					{{> hint_entry}}
  				{{/each}}
  			{{/each}}
  		</ul>
  	</td>
  	<td class="addHint_td">
  		<!--button class="delete delete_error">&times;</button-->
      <button type="button" class="btn btn-danger addHint">
        Submit
      </button>
  	</td>
  </tr>
</template>

<template name="hint_entry">
  <li>
    <div class="hintRow">
  		<span class="upvote_btn">
        <button type="button" class="btn btn-default upvote {{#if ifUpvoted}}upvoted{{else}}notupvoted{{/if}}">
          {{#if ifUpvoted}}Upvote{{else}}Upvote{{/if}}
        </button> 
      </span>
      <span class="upvote_count">
        {{upvotes}}
      </span>
      <span class="hintMsg_subcolumn">
        {{{lineBrokenHints hintMsg}}}
      </span>
    </div>
  </li>
</template>

<template name="column_width">
  <colgroup>
   <col span="1" style="width: 120px;">
   <col span="1" style="width: 150px;">
   <col span="1" style="width: 100px;">
   <col span="1" style="width: 100px;">
   <col span="1" style="width: 450px;">
   <col span="1" style="width: 80px;">
  </colgroup>
</template>


<template name="loginModal">
  <div class="modal in" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          <h4 class="modal-title" id="myModalLabel">Enter your Kerberos</h4>
          <div id="loginError">
            Please enter a valid Kerberos.
          </div>
          <form class="new-entry" id="nickname">
            <input type="text" placeholder=":)" name="username" />
          </form>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
  <div class="modal-backdrop fade in"></div>
</template>

<template name="feedbackBox">
  <div class="affix feedback">
    <h5>Feedback</h5>
    <form class="new-entry" id="feedback">
      <textarea rows="7" placeholder="e.g. questions, bugs, compliments, criticisms, suggestions, etc." name="feedback"></textarea>
      <button id="feedbackButton" class="btn btn-danger">
        Submit
      </button>
    </form>
  </div>
</template>

